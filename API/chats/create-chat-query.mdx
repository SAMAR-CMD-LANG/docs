---
title: "Create Chat Message"
description: "Creates a new user message and assistant response inside a specific chat session."
---

**POST** `/chats/sessions/{session_id}/messages/`

This endpoint creates a **new message** inside the specified chat session.  
It accepts **multipart/form-data**, allowing text content (and potentially attachments in future).  
Both:

- The **user message**
- The **assistant message**

are returned in the response.

A valid authentication token is required.

---

## ğŸ” Required Headers

| Key           | Value Format            | Required | Description |
|---------------|-------------------------|----------|-------------|
| Authorization | `Token <token>`         | Yes      | Auth token of the logged-in user |
| Content-Type  | `multipart/form-data`   | Yes      | Because request body uses form-data |

---

## ğŸ“ Request Body Parameters (form-data)

| Field        | Datatype | Required | Description |
|--------------|----------|----------|-------------|
| user_message | string   | Yes      | The actual user query text |
| (assistant is auto-generated by backend) | â€” | â€” | Assistantâ€™s message is generated and returned |

---

## ğŸ§© Created Message Object Structure

### **User / Assistant Message Object Fields**

| Field           | Datatype      | Required | Description |
|------------------|---------------|----------|-------------|
| message_uuid     | string        | Yes      | Unique message identifier |
| role             | string        | Yes      | `"user"` or `"assistant"` |
| content          | string        | Yes      | Actual message content |
| structured_data  | string/null   | No       | Any metadata (optional) |
| timestamp        | string        | Yes      | Timestamp when message was created |
| is_bookmarked    | boolean       | Yes      | Whether the message is bookmarked |
| attachment       | array         | Yes      | Attachments list (empty if none) |

---

## ğŸ“Œ Example Request Body (form-data)

```json
{
  "user_message": "can you explain what a strawman argument is"
}
```

(Note: Sent as **form-data**, not JSON.)

---

## ğŸ“® Example cURL

```bash
curl -X POST "https://your-api.com/chats/sessions/25dc6c83/messages/" \
  -H "Authorization: Token 6a0110..." \
  -F "user_message=can you explain what a strawman argument is"
```

---

## ğŸ’¡ Example JavaScript (fetch + FormData)

```javascript
const form = new FormData();
form.append("user_message", "can you explain what a strawman argument is");

fetch("https://your-api.com/chats/sessions/25dc6c83/messages/", {
  method: "POST",
  headers: {
    "Authorization": "Token 6a0110..."
  },
  body: form
})
  .then(res => res.json())
  .then(data => console.log(data));
```

---

# ğŸ§© Response Body Fields

| Field             | Datatype | Required | Description |
|--------------------|----------|----------|-------------|
| message            | string   | Yes      | Confirmation message |
| user_message       | object   | Yes      | The userâ€™s message object |
| assistant_message  | object   | Yes      | The generated assistant message object |
| persona_name       | string/null | No    | Persona used (optional) |

---

# âœ… Successful Response (201 Created)

```json
{
    "user_message": {
        "message_uuid": "fc4cda28-222b-400a-bcc8-a583d6664593",
        "role": "user",
        "content": "can you explain what a strawman argument is",
        "structured_data": null,
        "timestamp": "2025-11-16T04:25:47.155Z",
        "is_bookmarked": false,
        "attachment": []
    },
    "assistant_message": {
        "message_uuid": "f0a820a0-99c5-414e-b376-6d14d362f9e5",
        "role": "assistant",
        "content": "A strawman argument is a logical fallacy where someone misrepresents or exaggerates their opponent's argument...",
        "structured_data": null,
        "timestamp": "2025-11-16T04:26:08.270Z",
        "is_bookmarked": false,
        "attachment": []
    },
    "persona_name": null
}
```

---

# âš ï¸ Possible Errors

| Status | Description |
|--------|-------------|
| 400 Bad Request | Missing or invalid form-data field |
| 401 Unauthorized | Invalid or missing token |
| 404 Not Found | Session does not exist |
| 415 Unsupported Media Type | JSON sent instead of form-data |
| 500 Internal Server Error | Unexpected failure |

---

# ğŸ“˜ Notes

- Messages are stored in sequence under the same session.  
- Assistant message is automatically generated by the backend model.  
- Attachments are supported as arrays (empty in example).  
- Use this endpoint to send queries inside an open chat session.

